[appendix,obligation="informative"]
== Future development

In the terminology of agile development this specification is a "minimal viable product".  It is intended to be suitable for the majority of deformation models current and proposed deformation models. However during the course of its development a number of potential future enhancements were identified.  Some of these are discussed below.

=== Discontinuities in the displacement field

One difficulty with representing deformation using gridded deformation models is that they cannot represent discontinuity in the displacement field such as occurs where there is surface faulting.  There may be metres of relative coseismic movement across a fault trace which may traverse one or more grids in the model.  There may be breaks between segments of a fault trace between which the ground is distorted in unpredictable and often unmeasureable ways.  

These displacements cannot be represented in a gridded displacement model in which the displacements are interpolated smoothly across each grid cell.  This is illustrated in <<image-fault-discontinuity>> showing a modelled displacement field.  In the left hand grid cell, containing the fault trace, the interpolated displacement (gray arrows) is very different from the actual displacement (black arrows).  By contrast in the adjacent cell, which does not contain a fault trace, the interpolated and actual displacements are visually indistinguishable.

[[image-fault-discontinuity]]
image::fault_discontinuity.png[title="Ground displacement (black arrows) and interpolated displacement (gray arrows) in a grid cell containing a fault trace (hashed) line."]

There may not be a unique correct way to transform geographic features near a fault trace.  For example, the transformation of a cadastral boundary may be define by legal considerations which override the physical movement of the ground.  A road crossing a fault trace will be physically straightened to be usable.  These considerations cannot be accounted for by the deformation model.  In many cases data must be recaptured in such areas to restore spatial integrity.

For the users of deformation models it could be valuable to know when a transformation is likely to be affected by large errors which cannot be represented in the model.  Conceptually software would generate a warning to users.  For example, this would happen when transforming a feature spanning a fault trace and over a time range that includes the time of the earthquake.

Four mechanisms have been suggested that could either alert users to such a situation, or allow them to discover when it could affect their work.

* add metadata that defines the affected location and time.  This could be a multipolygon definition in a standard spatial format, such as well known text, associate with a date or epoch attribute.  It could be  either included in the deformation model metadata, or as an online resource referenced in the metadata.  This specification does not describe any standard for presenting such metadata.  It would be up to the user to identify and interpret it.
* use a large uncertainty to indicate where there is likely to be a large difference between the interpolated and actual displacements.  While this can be used to indicate the approximate area affected by discontinuity, it is spatially imprecise. A large uncertainty value at a node is interpolated into the four grid cells surrounding the node.  As shown in <<image-fault-discontinuity>>, the interpolation error from the discontinuity only affects the grid cells containing the fault trace - adjacent cells are not affected.  This cannot be accurately represented with uncertainty.  Nonetheless it is an option available producers, provided it is understood that it may overestimate the error in the vicinity of a fault trace.  
* analyse the displacement vectors at the grid nodes.  Grid cells likely to be affected by large interpolation errors could be identified by analysing the displacement vectors themselves.  A simple measure of this uncertainty in a grid cell is the the maximum vector difference between any two of the displacement vectors at the four nodes of the cell.  For a grid cell spanning the fault trace, the displacement vectors for nodes on one side of the fault are in the opposite direction to those of nodes on the other side of the fault.  There is a large vector difference between these vectors.  Conversely, for a grid cell to one side of the fault trace, the four displacement vectors have approximately the same direction and magnitude, so the maximum vector difference between any two of these vectors is small.  This method require special purpose software to analyse the grids and determine the affected grid cells.  The software would then have to  alert users when these cells were used in a transformation.  A benefit of this approach is that it provides an indication of the magnitude of the potential error.
* use an additional grid node attribute - a "flag" value that specifically identifies affected cells.  This is a boolean value, either true or false.  There are several options for how this could identify the affected cell.  One option is to use a convention defining which node identifies a grid cell.  For example the node on row i and column j could identify the cell between grid nodes on rows i and i+1 and columns j and j+1.  Another option is to set the flag as true on all nodes of an affected grid cell.  A grid cell is identified as affected only if the flag value is true on all four of its nodes.  Such an attribute would require special processing by software.

One difficulty with all these mechanisms is that coordinate operations are "black box" operations to most users - they often happen within GIS software as data from different coordinate systems or different epochs is combined for analysis and presentation.  In many cases this will be done on remote servers presenting information to users in web browsers.  Users may not even be aware that a coordinate operation is happening.  The mechanisms above would need extensive implementation in the spatial software stack for a warning generated in a coordinate transformation to be presented to users in a meaningful way.  In light of this practical difficulty, this specification does not explicitly define how discontinuity should be handled.  

Although handling of discontinuity is not defined in this specification, the first two of these options, using metadata and using uncertainty, are available to model producers already. 

The third method, analysing the displacment vectors, can be used with any deformation model.  An approach like this could be developed in software for analysing deformation models independently of coordinate transformation software.  This is an area that may warrant further research once more deformation models, and particularly models incorporating coseismic displacements, become available for analysis.

=== Vector interpolation in polar regions

As noted in <<discuss-deformation-near-poles>> this specification does not support the use of geographic coordinate reference systems (ie latitude/longitude) for deformation models close to the geographic poles.  In such cases the horizontal displacement vector cannot be interpolated or applied correctly.  Early versions of this specification did include an alternative interpolation method, and an alternative method of adding horizontal displacements to a geographic coordinate.  In each case the method involved transforming the displacments to and from a geocentric cartesian coordinate system.  

These were removed from the specification for two reasons.  The primary reason is that currently there is no requirement for this capability.  The second reason is that it was felt further research should be undertaken before recommending these specific methods. 